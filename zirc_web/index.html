<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zirc Polgármesteri Hivatal</title>
    <link rel="stylesheet" href="styleadat2.css">
    <link rel="icon" type="image/x-icon" href="icon.png">
</head>
<body>
    <div id="bekero">
        <h1>Zirc Polgármesteri Hivatal – online bejelentés</h1>
        <p id="szoveg1">
            A várakozásmentes, gyors ügyintézés érdekében kérjük, végezze el az előzetes adategyeztetést.  
        </p>
        <form novalidate>
            <label for="teljes-nev">Teljes név:</label>
            <input type="text" id="teljes-nev" placeholder="Vezetéknév Keresztnév"  name="teljes_nev" required>
        <br><br>
         <label for="szuletes-ev">Születési idő:</label>
            <input type="text" inputmode="numeric" id="szuletes-ev" placeholder="ÉÉÉÉ"   name="szu_ev" required oninput="this.value=this.value.replace(/[^0-9]/g,''); if(this.value > 2027) this.value = 2027; if(this.value.length >= 4) { this.value = this.value.slice(0,4); document.getElementById('szuletes-honap').focus(); }">
            <input type="text" inputmode="numeric" id="szuletes-honap" placeholder="HH" name="szu_honap" required oninput="this.value=this.value.replace(/[^0-9]/g,''); if(this.value > 12) this.value = 12; if(this.value.length >= 2) { this.value = this.value.slice(0,2); document.getElementById('szuletes-nap').focus(); }">
            <input type="text" inputmode="numeric" id="szuletes-nap" placeholder="NN" name="szu_nap" required oninput="this.value=this.value.replace(/[^0-9]/g,''); if(this.value > 31) this.value = 31; if(this.value.length >= 2) { this.value = this.value.slice(0,2); document.getElementById('lakcim-iranyitoszam').focus(); }">
        <br><br>
            <label for="lakcim-iranyitoszam">Lakcím:</label>
            <input type="text" inputmode="numeric" name="iranyitoszam" required pattern="[0-9]*" id="lakcim-iranyitoszam" placeholder="Irányítószám" oninput="if(this.value.length >= 4) { this.value = this.value.slice(0,4); document.getElementById('lakcim-varos').focus(); }" value="8420">
            <input type="text" id="lakcim-varos" placeholder="Város" value="Zirc" name="varos" required>
            <input type="text" id="lakcim-utca" placeholder="Utca, hsz., em./ajtó" size="40" name="utca" required>
        <br><br>
            <label for="tel-korzet">Telefonszám:</label>
            <input type="text" id="tel-orszag" value="+36" size="3" readonly>
            <input type="text" inputmode="numeric"  name="tel_korzet" required pattern="[0-9]*" id="tel-korzet" placeholder="30" oninput="if(this.value.length >= 2) { this.value = this.value.slice(0,2); document.getElementById('tel-szam').focus(); }">
            <input type="text" inputmode="numeric"  name="tel_szam" required pattern="[0-9]*" id="tel-szam" placeholder="1234567" oninput="if(this.value.length >= 7) this.value = this.value.slice(0,7)">
        <br><br>
            <label for="email-cim">E-mail cím:</label>
            <input type="email" id="email-cim" placeholder="pelda@email.hu" name="email" required>
        <br><br>
            <label for="uzenet-szoveg">Kapcsolatfelvétel vagy ügyintézés oka: (max 1000 karakter):</label><br>
            <textarea id="uzenet-szoveg" maxlength="1000" rows="5" cols="60" oninput="document.getElementById('szamlalo').innerText = this.value.length"  name="uzenet" required></textarea>
        <br><br>
            <span>Karakterszám: <span id="szamlalo">0</span> / 1000</span>
        <br><br>
            <button id="bekuldogomb"   type="submit">Beküldés</button> 
        </form>
    </div>
    <script>
        function moveFocus(currentInput, nextInputId, maxLength) {

            if (currentInput.value.length >= maxLength) {
                document.getElementById(nextInputId).focus();
            }
        

            if (currentInput.id === 'year' && currentInput.value.length === 4) {
                const year = parseInt(currentInput.value);
                if (year < 1900 || year > 2026) {
                    alert("Kérjük, 1900 és 2026 közötti évet adjon meg!");
                    currentInput.value = "";
                }
            }
        }
        function validateID(input) {

    input.value = input.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
    

    if (input.value.length === 8) {
        console.log("Formátum ellenőrzése...");
    }
}


  document.querySelectorAll('input[type="number"]').forEach(input => {
    input.addEventListener('keydown', (e) => {
      if (['e', 'E', '+', '-', '.'].includes(e.key)) {
        e.preventDefault();
      }
    });
  });

  function errorShake(element) {
    element.classList.add('shake-error');
    setTimeout(() => {
        element.classList.remove('shake-error');
    }, 300); 
}

document.querySelector('form').addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());

    try {
        const response = await fetch('/.netlify/functions/mentes', {
            method: 'POST',
            body: JSON.stringify(data),
            headers: { 'Content-Type': 'application/json' }
        });

        if (response.ok) {
            alert('Sikeres beküldés!');
            e.target.reset();
        } else { alert('Hiba történt!'); }
    } catch (error) { alert('Hiba a szerverrel!'); }
});

        </script>
</body>

</html>





